<%- include('partials/header') %>

<main class="container my-5">
  <h1 class="text-center mb-4">Marketplace</h1>
  <p class="text-center text-muted mb-5">Explore live auctions and place your bids.</p>
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    <% auctions.forEach(auction => { %>
      <div class="col">
        <div class="card h-100">
          <div class="card-body">
            <h5 class="card-title"><%= auction.title %></h5>
            <p class="card-text">
              Quantity: <%= auction.quantity %> <%= auction.unit %><br>
              Current Bid: $<%= auction.currentBid || auction.minBid %><br>
              Closes: <%= new Date(auction.closingDate).toLocaleString() %>
            </p>
          </div>
          <div class="card-footer">
            <form action="/api/bid" method="POST" class="d-flex">
              <input type="hidden" name="auctionId" value="<%= auction._id %>">
              <input type="number" name="amount" class="form-control me-2" min="<%= (auction.currentBid || auction.minBid) + 0.01 %>" step="0.01" required>
              <button type="submit" class="btn btn-success">Bid</button>
            </form>
          </div>
        </div>
      </div>
    <% }) %>
  </div>
</main>

<%- include('partials/footer') %>